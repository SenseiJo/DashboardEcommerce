import{o as d,c as i,a as e,t as a,F as _,r as v,u as o,d as x,b as m,e as c,f as A,w as f,v as h,n as F,g as y}from"./index-BeQU7anV.js";import{u}from"./customerStore-DjywAIpF.js";import{C as g,A as B,p as C,a as w,b as k,P as $,c as D,L as j,B as N,d as T,e as P}from"./index-C1Q4PVne.js";const E={class:"flex flex-col space-y-2 py-2"},L={class:"font-bold uppercase"},V=["onClick"],O={key:0,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"h-4 w-4 text-green-500"},S={key:1,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",class:"inline-block h-4 w-4 stroke-current text-red-500"},z={class:"text-white"},b={__name:"badgeComponent",props:["categorie"],setup(p){const n=u();return(r,l)=>(d(),i("div",E,[e("span",L,a(p.categorie.title),1),(d(!0),i(_,null,v(p.categorie.attributes,t=>(d(),i("div",{class:"badge bg-gray-500 gap-2 hover:cursor-pointer",key:t.text,onClick:s=>o(n).sortedCustomer(p.categorie.about,t.id)},[t.check?(d(),i("svg",O,l[0]||(l[0]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m4.5 12.75 6 6 9-13.5"},null,-1)]))):(d(),i("svg",S,l[1]||(l[1]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,-1)]))),e("p",z,a(t.text),1)],8,V))),128))]))}},R={class:"border-b w-full px-4 flex justify-between"},M={class:"ml-4"},I={class:"flex items-center space-x-2"},U={class:"flex flex-col justify-end p-2"},Q={class:"p-2"},q={class:"p-8 border-b"},G={class:"mx-auto w-1/2 border-collapse border border-gray-300"},Z={class:"border border-gray-300 px-4 py-2 text-center"},H={class:"border border-gray-300 px-4 py-2 text-center"},J={class:"border border-gray-300 px-4 py-2 text-center"},K={class:"border border-gray-300 px-4 py-2 text-center"},W={class:"border border-gray-300 px-4 py-2"},X={class:"border border-gray-300 px-4 py-2"},Y={class:"border border-gray-300 px-4 py-2"},ee={class:"border border-gray-300 px-4 py-2"},te={class:"border border-gray-300 px-4 py-2"},se={class:"border border-gray-300 px-4 py-2"},re={class:"flex justify-center items-center mt-4 space-x-4"},oe=["disabled"],ae=["disabled"],ne=x({__name:"customerComponent",setup(p){const n=m(!1),r=u();return(l,t)=>(d(),i(_,null,[e("div",R,[e("div",M,[t[6]||(t[6]=e("h2",{class:"underline font-bold uppercase"},"Trier par :",-1)),e("div",I,[c(b,{categorie:o(r).sortingOptions.customerID},null,8,["categorie"]),c(b,{categorie:o(r).sortingOptions.contactName},null,8,["categorie"]),c(b,{categorie:o(r).sortingOptions.country},null,8,["categorie"])])]),e("div",U,[e("p",Q,[A("Résultat obtenu : "+a(o(r).paginatedCustomers.length)+" , Page numéro : ",1),f(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>o(r).currentPage=s),class:"w-6 text-center cursor-pointer hover:underline"},null,512),[[h,o(r).currentPage,void 0,{number:!0}]])]),e("div",{class:F(["flex border w-72 h-10 items-center justify-between rounded-full",{"border-black  ":n.value,"border-gray-300":!n.value}])},[f(e("input",{type:"text",placeholder:"Rechercher un client par prénom ou nom",class:"w-full h-full p-2 rounded-l-full outline-none","onUpdate:modelValue":t[1]||(t[1]=s=>o(r).searchQuery=s),onFocus:t[2]||(t[2]=s=>n.value=!0),onBlur:t[3]||(t[3]=s=>n.value=!1)},null,544),[[h,o(r).searchQuery]]),t[7]||(t[7]=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6 mr-4 hover:cursor-pointer"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})],-1))],2)])]),e("div",q,[e("table",G,[t[8]||(t[8]=e("thead",null,[e("tr",{class:"bg-gray-200"},[e("th",{class:"border border-gray-300 px-4 py-2 text-left"},"ID client"),e("th",{class:"border border-gray-300 px-4 py-2 text-left"},"Prénom - Nom"),e("th",{class:"border border-gray-300 px-4 py-2 text-left"},"Nom de l'entreprise"),e("th",{class:"border border-gray-300 px-4 py-2 text-left"},"Titre du contact"),e("th",{class:"border border-gray-300 px-4 py-2 text-left"},"Adresse"),e("th",{class:"border border-gray-300 px-4 py-2 text-left"},"Ville"),e("th",{class:"border border-gray-300 px-4 py-2 text-left"},"Région"),e("th",{class:"border border-gray-300 px-4 py-2 text-left"},"Code postal"),e("th",{class:"border border-gray-300 px-4 py-2 text-left"},"Pays"),e("th",{class:"border border-gray-300 px-4 py-2 text-left"},"Téléphone")])],-1)),e("tbody",null,[(d(!0),i(_,null,v(o(r).paginatedCustomers,s=>(d(),i("tr",{key:s._id,class:"hover:bg-gray-100"},[e("td",Z,a(s.customerID),1),e("td",H,a(s.contactName),1),e("td",J,a(s.companyName),1),e("td",K,a(s.contactTitle),1),e("td",W,a(s.address),1),e("td",X,a(s.city),1),e("td",Y,a(s.region=="NULL"?"":s.region),1),e("td",ee,a(s.postalCode),1),e("td",te,a(s.country),1),e("td",se,a(s.phone),1)]))),128))])]),e("div",re,[e("button",{onClick:t[4]||(t[4]=(...s)=>o(r).prevPage&&o(r).prevPage(...s)),disabled:o(r).currentPage===1,class:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600 disabled:opacity-50"}," Précédent ",8,oe),e("span",null,"Page "+a(o(r).currentPage)+" sur "+a(o(r).totalPages),1),e("button",{onClick:t[5]||(t[5]=(...s)=>o(r).nextPage&&o(r).nextPage(...s)),disabled:o(r).currentPage*o(r).itemsPerPage>=o(r).customers.length,class:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50"}," Suivant ",8,ae)])])],64))}}),le={style:{width:"400px",height:"400px"}};g.register(B,C,w);const de={components:{Pie:$}},ie=Object.assign(de,{__name:"ordersComponent",setup(p){g.register(k);const n=u(),r=m({labels:[],datasets:[{backgroundColor:["#41B883","#E46651","#00D8FF"],data:[]}]}),l={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},datalabels:{color:"#fff",font:{size:14},formatter:t=>`${t} commandes`}}};return y(async()=>{const t=await n.getTop("/top-customers");if(!t||!Array.isArray(t)){console.error("Données invalides reçues :",t);return}r.value={...r.value,labels:t.map(s=>s._id),datasets:[{...r.value.datasets[0],data:t.map(s=>s.totalOrders)}]}}),(t,s)=>(d(),i("div",null,[s[0]||(s[0]=e("h3",{class:"font-bold uppercase text-center"},"Top client",-1)),e("div",le,[c(o($),{data:r.value,options:l},null,8,["data"])])]))}}),ce={style:{width:"1000px",height:"400px"}};g.register(D,j,N,T,C,w);const pe={components:{Bar:P}},ue=Object.assign(pe,{__name:"countriesComponent",setup(p){g.register(k);const n=u(),r=m({labels:[],datasets:[{label:"Nombre de clients par pays",backgroundColor:["#FF5733","#33FF57","#3357FF","#FF33A1","#F1C40F","#8E44AD","#2ECC71","#E74C3C","#3498DB","#1ABC9C","#34495E","#95A5A6","#16A085","#C0392B","#2980B9"],data:[]}]}),l={responsive:!0,maintainAspectRatio:!1};return y(async()=>{const t=await n.getTop("/top-countries-customers");if(!t||!Array.isArray(t)){console.error("Données invalides reçues :",t);return}r.value={...r.value,labels:t.map(s=>s._id),datasets:[{...r.value.datasets[0],data:t.map(s=>s.totalCustomers)}]}}),(t,s)=>(d(),i("div",null,[s[0]||(s[0]=e("h3",{class:"font-bold uppercase text-center"},"Pays",-1)),e("div",ce,[c(o(P),{data:r.value,options:l},null,8,["data"])])]))}}),ge={class:"w-full px-4 border-b mt-2"},be={class:"ml-4"},_e={class:"flex items-center justify-evenly mx-auto flex-wrap"},xe=x({__name:"customerGraphicComponent",setup(p){return(n,r)=>(d(),i("div",ge,[e("div",be,[r[0]||(r[0]=e("h2",{class:"underline font-bold uppercase mb-8"},"Statistiques",-1)),e("div",_e,[c(ie,{class:"m-8"}),c(ue,{class:"m-8"})])])]))}}),me={class:"mx-auto size-full"},ye={key:0,class:"text-center mt-8 flex items-center justify-center flex-col"},fe={key:1},we=x({__name:"customerView",setup(p){const n=u();return y(()=>{n.getCustomers()}),(r,l)=>(d(),i("div",me,[l[1]||(l[1]=e("h1",{class:"font-bold text-3xl border-b p-8"},"Liste des clients",-1)),o(n).loading?(d(),i("div",ye,l[0]||(l[0]=[e("span",{class:"loading loading-bars loading-xs size-32"},null,-1),e("span",null,"Chargement...",-1)]))):(d(),i("div",fe,[c(ne),c(xe)]))]))}});export{we as default};
