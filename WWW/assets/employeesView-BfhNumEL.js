import{h as K,b as g,i as C,o as d,c,a as e,t as n,F as h,r as P,u as s,d as _,e as m,f as W,w as B,v as L,n as X,g as E,j as Y,k as ee}from"./index-BeQU7anV.js";import{f as $,C as v,A as te,p as M,a as S,b as O,P as T,c as se,L as oe,g as re,h as ae,d as le,i as z}from"./index-C1Q4PVne.js";import{u as R}from"./customerStore-DjywAIpF.js";const w=K("employee",()=>{const u=g([]),o=g(!0),r=g([]),a=6,t=g(1),l=g(""),N=g(null),V=C(()=>Math.ceil(k.value.length/a)),j=C(()=>{const i=(t.value-1)*a,p=i+a;return k.value.slice(i,p)}),U=async()=>{try{const{data:i}=await $.get("/employees");u.value=[...i],r.value=[...i]}catch(i){console.error("Erreur lors de la récupération des clients :",i)}finally{o.value=!1}},Q=async i=>{j.value.forEach(p=>{p.check=p.employeeID===i.employeeID});try{const{data:p}=await $.get(`/getEmployeeDetails/${i.employeeID}`);N.value=p[0]}catch(p){console.error("Erreur lors de la récupération des clients :",p)}},Z=async i=>{try{const{data:p}=await $.get(i);return p}catch(p){console.error("Erreur lors de la récupération des clients :",p)}},q=()=>{t.value>1&&(t.value-=1)},G=()=>{const i=k.value.length;t.value*a<i&&(t.value+=1)},k=C(()=>l.value.trim()?u.value.filter(i=>i.lastName.toLowerCase().includes(l.value.toLowerCase())):u.value),D=(i,p="asc")=>{if(p==="default"){u.value=[...r.value];return}u.value.sort((b,J)=>{for(let F of i){const f=b[F]||"",x=J[F]||"";if(!isNaN(f)&&!isNaN(x)){const y=f-x;if(y!==0)return p==="asc"?y:-y}else if(typeof f=="string"&&typeof x=="string"){const y=f.localeCompare(x,void 0,{numeric:!0,sensitivity:"base"});if(y!==0)return p==="asc"?y:-y}}return 0})},H=(i,p)=>{switch(A.value[i].attributes.forEach(b=>{b.check=b.id===p}),p){case"2":D([i,"firstName"],"asc");break;case"3":D([i,"firstName"],"desc");break;default:D([i,"firstName"],"default");break}},A=g({employeeID:{about:"employeeID",title:"ID",attributes:[{id:"1",text:"Défaut",check:!0},{id:"2",text:"Ordre croissant",check:!1},{id:"3",text:"Ordre décroissant",check:!1}]},contactName:{about:"contactName",title:"NOM",attributes:[{id:"1",text:"Défaut",check:!0},{id:"2",text:"Ordre croissant",check:!1},{id:"3",text:"Ordre décroissant",check:!1}]}});return{loading:o,prevPage:q,nextPage:G,paginatedEmployees:j,totalPages:V,getEmployees:U,employees:u,currentPage:t,sortingOptions:A,sortedEmployee:H,searchQuery:l,getTop:Z,getEmployeeDetail:Q,employeeDetail:N}}),ne={class:"flex flex-col space-y-2 py-2"},ie={class:"font-bold uppercase"},de=["onClick"],ce={key:0,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"h-4 w-4 text-green-500"},pe={key:1,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",class:"inline-block h-4 w-4 stroke-current text-red-500"},ue={class:"text-white"},I={__name:"badgeComponent",props:["categorie"],setup(u){const o=w();return(r,a)=>(d(),c("div",ne,[e("span",ie,n(u.categorie.title),1),(d(!0),c(h,null,P(u.categorie.attributes,t=>(d(),c("div",{class:"badge bg-gray-500 gap-2 hover:cursor-pointer",key:t.text,onClick:l=>s(o).sortedEmployee(u.categorie.about,t.id)},[t.check?(d(),c("svg",ce,a[0]||(a[0]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m4.5 12.75 6 6 9-13.5"},null,-1)]))):(d(),c("svg",pe,a[1]||(a[1]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,-1)]))),e("p",ue,n(t.text),1)],8,de))),128))]))}},ge={class:"border-b w-full px-4 flex justify-between"},me={class:"ml-4"},ye={class:"flex items-center space-x-2"},be={class:"flex flex-col justify-end p-2"},fe={class:"p-2"},xe={class:"p-8 border-b"},he={class:"mx-auto w-1/2 border-collapse border border-gray-300"},_e={class:"border border-gray-300 px-4 py-2 text-center"},ve={class:"border border-gray-300 px-4 py-2 text-center"},we={class:"border border-gray-300 px-4 py-2 text-center"},ke={class:"flex justify-center items-center mt-4 space-x-4"},De=["disabled"],Ce=["disabled"],$e=_({__name:"employeeComponent",setup(u){const o=g(!1),r=w();return(a,t)=>(d(),c(h,null,[e("div",ge,[e("div",me,[t[6]||(t[6]=e("h2",{class:"underline font-bold uppercase"},"Trier par :",-1)),e("div",ye,[m(I,{categorie:s(r).sortingOptions.employeeID},null,8,["categorie"]),m(I,{categorie:s(r).sortingOptions.contactName},null,8,["categorie"])])]),e("div",be,[e("p",fe,[W("Résultat obtenu : "+n(s(r).paginatedEmployees.length)+" , Page numéro : ",1),B(e("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>s(r).currentPage=l),class:"w-6 text-center cursor-pointer hover:underline"},null,512),[[L,s(r).currentPage,void 0,{number:!0}]])]),e("div",{class:X(["flex border w-72 h-10 items-center justify-between rounded-full",{"border-black  ":o.value,"border-gray-300":!o.value}])},[B(e("input",{type:"text",placeholder:"Rechercher par nom",class:"w-full h-full p-2 rounded-l-full outline-none","onUpdate:modelValue":t[1]||(t[1]=l=>s(r).searchQuery=l),onFocus:t[2]||(t[2]=l=>o.value=!0),onBlur:t[3]||(t[3]=l=>o.value=!1)},null,544),[[L,s(r).searchQuery]]),t[7]||(t[7]=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6 mr-4 hover:cursor-pointer"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})],-1))],2)])]),e("div",xe,[e("table",he,[t[8]||(t[8]=e("thead",null,[e("tr",{class:"bg-gray-200"},[e("th",{class:"border border-gray-300 px-4 py-2 text-left"},"ID Employé"),e("th",{class:"border border-gray-300 px-4 py-2 text-left"},"Prénom - Nom"),e("th",{class:"border border-gray-300 px-4 py-2 text-left"},"Titre")])],-1)),e("tbody",null,[(d(!0),c(h,null,P(s(r).paginatedEmployees,l=>(d(),c("tr",{key:l.employeeID,class:"hover:bg-gray-100"},[e("td",_e,n(l.employeeID),1),e("td",ve,n(l.firstName)+" "+n(l.lastName),1),e("td",we,n(l.title),1)]))),128))])]),e("div",ke,[e("button",{onClick:t[4]||(t[4]=(...l)=>s(r).prevPage&&s(r).prevPage(...l)),disabled:s(r).currentPage===1,class:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600 disabled:opacity-50"}," Précédent ",8,De),e("span",null,"Page "+n(s(r).currentPage)+" sur "+n(s(r).totalPages),1),e("button",{onClick:t[5]||(t[5]=(...l)=>s(r).nextPage&&s(r).nextPage(...l)),disabled:s(r).currentPage*s(r).itemsPerPage>=s(r).employees.length,class:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50"}," Suivant ",8,Ce)])])],64))}}),Pe={style:{width:"400px",height:"400px"}};v.register(te,M,S);const Ee={components:{Pie:T}},Ne=Object.assign(Ee,{__name:"countriesComponent",setup(u){v.register(O);const o=R(),r=g({labels:[],datasets:[{backgroundColor:["#41B883","#E46651","#00D8FF"],data:[]}]}),a={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},datalabels:{color:"#fff",font:{size:14},formatter:t=>`${t} employés`}}};return E(async()=>{const t=await o.getTop("/top-coutries-employees");if(!t||!Array.isArray(t)){console.error("Données invalides reçues :",t);return}r.value={...r.value,labels:t.map(l=>l._id),datasets:[{...r.value.datasets[0],data:t.map(l=>l.count)}]}}),(t,l)=>(d(),c("div",null,[l[0]||(l[0]=e("h3",{class:"font-bold uppercase text-center"},"Nombre d'employés par pays",-1)),e("div",Pe,[m(s(T),{data:r.value,options:a},null,8,["data"])])]))}}),je={style:{width:"1000px",height:"400px"}};v.register(se,oe,re,ae,le,M,S);const Ae={components:{Line:z}},Fe=Object.assign(Ae,{__name:"hireDateComponent",setup(u){v.register(O);const o=R(),r=g({labels:[],datasets:[{label:null,backgroundColor:["#FF5733","#33FF57","#3357FF","#FF33A1","#F1C40F","#8E44AD","#2ECC71","#E74C3C","#3498DB","#1ABC9C","#34495E","#95A5A6","#16A085","#C0392B","#2980B9"],data:[]}]}),a={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,max:5,ticks:{callback:function(t){return Number.isInteger(t)?t:""},stepSize:1,font:{size:12,weight:"bold"}}}}};return E(async()=>{const t=await o.getTop("/hireDate-employee");if(!t||!Array.isArray(t)){console.error("Données invalides reçues :",t);return}r.value={...r.value,labels:t.map(l=>new Date(l._id).toLocaleDateString("fr-FR")),datasets:[{...r.value.datasets[0],data:t.map(l=>l.totalEmployee)}]}}),(t,l)=>(d(),c("div",null,[l[0]||(l[0]=e("h3",{class:"font-bold uppercase text-center"},"Nombre d'Embauches",-1)),e("div",je,[m(s(z),{data:r.value,options:a},null,8,["data"])])]))}}),Be={class:"w-full px-4 border-b mt-2"},Le={class:"ml-4"},Ie={class:"flex items-center justify-evenly mx-auto flex-wrap"},Me=_({__name:"employeeGraphicComponent",setup(u){return(o,r)=>(d(),c("div",Be,[e("div",Le,[r[0]||(r[0]=e("h2",{class:"underline font-bold uppercase mb-8"},"Statistiques",-1)),e("div",Ie,[m(Ne,{class:"m-8"}),m(Fe,{class:"m-8"})])])]))}}),Se={class:"w-full px-4 border-b mt-2"},Oe={class:"w-full px-4 mt-2 flex mb-12"},Te={class:"flex flex-col items-center justify-center"},ze={class:"grid grid-cols-2 gap-2 w-96"},Re=["onClick"],Ve={key:0,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"h-4 w-4 text-green-500"},Ue={key:1,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",class:"inline-block h-4 w-4 stroke-current text-red-500"},Qe={class:"text-white"},Ze={class:"flex justify-center items-center mt-4 space-x-4"},qe=["disabled"],Ge=["disabled"],He={key:0},Je={class:"font-bold mb-2 text-center"},Ke={class:"mx-auto w-1/2 border-collapse border border-gray-300"},We={class:"hover:bg-gray-100"},Xe={class:"border border-gray-300 px-4 py-2 text-center"},Ye={class:"border border-gray-300 px-4 py-2 text-center"},et={class:"border border-gray-300 px-4 py-2"},tt={class:"border border-gray-300 px-4 py-2"},st={class:"border border-gray-300 px-4 py-2"},ot={class:"border border-gray-300 px-4 py-2"},rt={class:"border border-gray-300 px-4 py-2"},at={class:"border border-gray-300 px-4 py-2"},lt={class:"border border-gray-300 px-4 py-2"},nt={class:"border border-gray-300 px-4 py-2"},it=_({__name:"employeeDetailComponent",setup(u){const o=w();return Y(()=>{o.employeeDetail=null}),(r,a)=>(d(),c("div",Se,[a[7]||(a[7]=e("h2",{class:"underline font-bold uppercase mb-8 ml-4"},"Afficher les détails d'un employé",-1)),e("div",Oe,[e("div",Te,[e("div",ze,[(d(!0),c(h,null,P(s(o).paginatedEmployees,t=>(d(),c("div",{class:"badge bg-gray-500 gap-2 hover:cursor-pointer justify-self-center w-full",key:t.employeeID,onClick:l=>s(o).getEmployeeDetail(t)},[t.check?(d(),c("svg",Ve,a[2]||(a[2]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m4.5 12.75 6 6 9-13.5"},null,-1)]))):(d(),c("svg",Ue,a[3]||(a[3]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,-1)]))),e("p",Qe,n(t.firstName)+" - "+n(t.lastName),1)],8,Re))),128))]),e("div",Ze,[e("button",{onClick:a[0]||(a[0]=(...t)=>s(o).prevPage&&s(o).prevPage(...t)),disabled:s(o).currentPage===1},a[4]||(a[4]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 15.75 3 12m0 0 3.75-3.75M3 12h18"})],-1)]),8,qe),e("span",null,"Page "+n(s(o).currentPage)+" sur "+n(s(o).totalPages),1),e("button",{onClick:a[1]||(a[1]=(...t)=>s(o).nextPage&&s(o).nextPage(...t)),disabled:s(o).currentPage*s(o).itemsPerPage>=s(o).employees.length},a[5]||(a[5]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.25 8.25 21 12m0 0-3.75 3.75M21 12H3"})],-1)]),8,Ge)])]),s(o).employeeDetail?(d(),c("div",He,[e("p",Je,n(s(o).employeeDetail.firstName)+" "+n(s(o).employeeDetail.lastName),1),e("table",Ke,[a[6]||(a[6]=e("thead",null,[e("tr",{class:"bg-gray-200"},[e("th",{class:"border border-gray-300 px-4 py-2 text-left"},"Titre"),e("th",{class:"border border-gray-300 px-4 py-2 text-left"},"Titre de politesse"),e("th",{class:"border border-gray-300 px-4 py-2 text-left"},"Date de naissance"),e("th",{class:"border border-gray-300 px-4 py-2 text-left"},"Date d'embauche"),e("th",{class:"border border-gray-300 px-4 py-2 text-left"},"Adresse"),e("th",{class:"border border-gray-300 px-4 py-2 text-left"},"Ville"),e("th",{class:"border border-gray-300 px-4 py-2 text-left"},"Région"),e("th",{class:"border border-gray-300 px-4 py-2 text-left"},"Code postal"),e("th",{class:"border border-gray-300 px-4 py-2 text-left"},"Pays"),e("th",{class:"border border-gray-300 px-4 py-2 text-left"},"Téléphone")])],-1)),e("tbody",null,[e("tr",We,[e("td",Xe,n(s(o).employeeDetail.title),1),e("td",Ye,n(s(o).employeeDetail.titleOfCourtesy),1),e("td",et,n(new Date(s(o).employeeDetail.birthDate).toLocaleDateString("fr-FR")),1),e("td",tt,n(new Date(s(o).employeeDetail.hireDate).toLocaleDateString("fr-FR")),1),e("td",st,n(s(o).employeeDetail.address),1),e("td",ot,n(s(o).employeeDetail.city),1),e("td",rt,n(s(o).employeeDetail.regionDetails[0].regionDescription==="NULL"?"":s(o).employeeDetail.regionDetails[0].regionDescription),1),e("td",at,n(s(o).employeeDetail.postalCode),1),e("td",lt,n(s(o).employeeDetail.country),1),e("td",nt,n(s(o).employeeDetail.homePhone),1)])])])])):ee("",!0)])]))}}),dt={class:"mx-auto size-full"},ct={key:0,class:"text-center mt-8 flex items-center justify-center flex-col"},pt={key:1},yt=_({__name:"employeesView",setup(u){const o=w();return E(()=>{o.getEmployees()}),(r,a)=>(d(),c("div",dt,[a[1]||(a[1]=e("h1",{class:"font-bold text-3xl border-b p-8"},"Liste des employés",-1)),s(o).loading?(d(),c("div",ct,a[0]||(a[0]=[e("span",{class:"loading loading-bars loading-xs size-32"},null,-1),e("span",null,"Chargement...",-1)]))):(d(),c("div",pt,[m($e),m(Me),m(it)]))]))}});export{yt as default};
