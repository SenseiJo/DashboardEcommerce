import{h as de,b as l,i as w,g as b,o as u,c as p,a as r,e as v,u as g,t as h,k as ue,F as j,r as pe,f as R,d as z}from"./index-BeQU7anV.js";import{f,C as _,c as V,L as M,B as me,d as Q,p as E,a as F,b as P,e as Z,g as fe,h as ge,i as q,A as G,P as Y,D as H}from"./index-C1Q4PVne.js";const C=de("order",()=>{const i=l([]),a=l(!0),o=l([]),n=6,s=l(1),t=l(""),c=l(),m=l(""),x=l(""),k=l(""),T=l(""),$=l(""),S=l(""),J=w(()=>Math.ceil(B.value.length/n)),K=w(()=>{const e=(s.value-1)*n,d=e+n;return B.value.slice(e,d)}),U=async()=>{try{const{data:e}=await f.get("/orders");i.value=[...e],o.value=[...e]}catch(e){console.error("Erreur lors de la récupération des clients :",e)}finally{a.value=!1}},W=async()=>{try{const{data:e}=await f.get("/nb-orders-date");c.value=e}catch(e){console.error("Erreur lors de la récupération des clients :",e)}},X=async()=>{try{const{data:e}=await f.get("/average-price-orders");m.value=e}catch(e){console.error("Erreur lors de la récupération des clients :",e)}},ee=async()=>{try{const{data:e}=await f.get("/total-price-orders");x.value=e}catch(e){console.error("Erreur lors de la récupération des clients :",e)}},te=async()=>{try{const{data:e}=await f.get("/total-orders");k.value=e}catch(e){console.error("Erreur lors de la récupération des clients :",e)}},se=async()=>{try{const{data:e}=await f.get("/total-orders-country");T.value=e}catch(e){console.error("Erreur lors de la récupération des clients :",e)}},re=async()=>{try{const{data:e}=await f.get("/total-orders-employees");$.value=e}catch(e){console.error("Erreur lors de la récupération des clients :",e)}},ae=async()=>{try{const{data:e}=await f.get("/top-products-orders");S.value=e}catch(e){console.error("Erreur lors de la récupération des clients :",e)}},oe=async e=>{try{const{data:d}=await f.get(e);return d}catch(d){console.error("Erreur lors de la récupération des clients :",d)}},ne=()=>{s.value>1&&(s.value-=1)},le=()=>{const e=B.value.length;s.value*n<e&&(s.value+=1)},B=w(()=>t.value.trim()?i.value.filter(e=>e.lastName.toLowerCase().includes(t.value.toLowerCase())):i.value),N=(e,d="asc")=>{if(d==="default"){i.value=[...o.value];return}i.value.sort((A,ie)=>{for(let L of e){const O=A[L]||"",D=ie[L]||"";if(!isNaN(O)&&!isNaN(D)){const y=O-D;if(y!==0)return d==="asc"?y:-y}else if(typeof O=="string"&&typeof D=="string"){const y=O.localeCompare(D,void 0,{numeric:!0,sensitivity:"base"});if(y!==0)return d==="asc"?y:-y}}return 0})},ce=(e,d)=>{switch(I.value[e].attributes.forEach(A=>{A.check=A.id===d}),d){case"2":N([e,"firstName"],"asc");break;case"3":N([e,"firstName"],"desc");break;default:N([e,"firstName"],"default");break}},I=l({orderID:{about:"orderID",title:"ID",attributes:[{id:"1",text:"Défaut",check:!0},{id:"2",text:"Ordre croissant",check:!1},{id:"3",text:"Ordre décroissant",check:!1}]},contactName:{about:"contactName",title:"NOM",attributes:[{id:"1",text:"Défaut",check:!0},{id:"2",text:"Ordre croissant",check:!1},{id:"3",text:"Ordre décroissant",check:!1}]}});return{loading:a,prevPage:ne,nextPage:le,paginatedOrders:K,totalPages:J,getOrders:U,orders:i,currentPage:s,sortingOptions:I,sortedOrder:ce,searchQuery:t,getTop:oe,getNbOrdersByDate:W,getAveragePriceOrders:X,getTotalPrice:ee,getTotalOrder:te,ordersTotal:k,ordersTotalPrice:x,ordersAverage:m,ordersByDate:c,getTotalOrderPerCountry:se,ordersTotalPerCountry:T,getTotalOrderPerEmployees:re,ordersTotalPerEmployees:$,getTopProductsInOrders:ae,ordersTopProduct:S}}),ve={class:"space-y-8"},_e={class:"max-w-screen-xl overflow-x-auto p-4"},ye={style:{width:"1000px",height:"400px"}};_.register(V,M,me,Q,E,F);const he={components:{Bar:Z}},be=Object.assign(he,{__name:"countriesComponent",setup(i){_.register(P);const a=C(),o=l({labels:[],datasets:[{label:null,backgroundColor:["#FF5733","#33FF57","#3357FF","#FF33A1","#F1C40F","#8E44AD","#2ECC71","#E74C3C","#3498DB","#1ABC9C","#34495E","#95A5A6","#16A085","#C0392B","#2980B9"],data:[]}]}),n={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,ticks:{callback:function(s){return Number.isInteger(s)?s:""},stepSize:1,font:{size:12,weight:"bold"}}}}};return b(async()=>{await a.getTotalOrderPerCountry();const s=a.ordersTotalPerCountry;if(!s||!Array.isArray(s)){console.error("Données invalides reçues :",s);return}o.value={...o.value,labels:s.map(t=>t._id),datasets:[{...o.value.datasets[0],data:s.map(t=>t.totalOrders)}]}}),(s,t)=>(u(),p("div",ve,[r("div",null,[t[0]||(t[0]=r("h3",{class:"font-bold uppercase text-center"},"Nombre de commandes par PAYS",-1)),r("div",_e,[r("div",ye,[v(g(Z),{data:o.value,options:n},null,8,["data"])])])])]))}}),Ce={class:"space-y-2 border-y p-4 w-full"},xe={key:0},Ae={class:"space-y-8"},Oe={class:"max-w-screen-xl overflow-x-auto p-4"},De={style:{width:"5000px",height:"400px"}};_.register(V,M,fe,ge,Q,E,F);const we={components:{Line:q}},Ee=Object.assign(we,{__name:"hireDateComponent",setup(i){_.register(P);const a=C(),o=l({labels:[],datasets:[{label:null,backgroundColor:["#FF5733","#33FF57","#3357FF","#FF33A1","#F1C40F","#8E44AD","#2ECC71","#E74C3C","#3498DB","#1ABC9C","#34495E","#95A5A6","#16A085","#C0392B","#2980B9"],data:[]}]}),n={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,max:5,ticks:{callback:function(s){return Number.isInteger(s)?s:""},stepSize:1,font:{size:12,weight:"bold"}}}}};return b(async()=>{await a.getAveragePriceOrders(),await a.getTotalPrice(),await a.getTotalOrder(),await a.getNbOrdersByDate(),await a.getTopProductsInOrders();const s=a.ordersByDate;if(!s||!Array.isArray(s)){console.error("Données invalides reçues :",s);return}console.log(s.value),o.value={...o.value,labels:s.map(t=>new Date(t._id).toLocaleDateString("fr-FR")),datasets:[{...o.value.datasets[0],data:s.map(t=>t.total)}]}}),(s,t)=>{var c,m;return u(),p(j,null,[r("div",Ce,[r("div",null,[t[0]||(t[0]=r("h3",{class:"font-bold uppercase"}," Chiffre d'affaire: ",-1)),r("p",null,h((c=g(a))==null?void 0:c.ordersTotalPrice)+" €",1)]),r("div",null,[t[1]||(t[1]=r("h3",{class:"font-bold uppercase"}," Moyenne des prix par commande: ",-1)),g(a).ordersAverage?(u(),p("p",xe,h(g(a).ordersAverage.toFixed(2))+" € ",1)):ue("",!0)]),r("div",null,[t[2]||(t[2]=r("h3",{class:"font-bold uppercase"}," Nombre total de commandes: ",-1)),r("p",null,h((m=g(a))==null?void 0:m.ordersTotal),1)])]),r("div",Ae,[r("div",null,[t[3]||(t[3]=r("h3",{class:"font-bold uppercase text-center"},"Nombre de commandes par date",-1)),r("div",Oe,[r("div",De,[v(g(q),{data:o.value,options:n},null,8,["data"])])])])])],64)}}}),Fe={style:{width:"400px",height:"400px"}};_.register(G,E,F);const Pe={components:{Pie:Y}},Be=Object.assign(Pe,{__name:"customerCompnent",setup(i){_.register(P);const a=C(),o=l({labels:[],datasets:[{backgroundColor:["#FF5733","#33FF57","#3357FF","#FF33A1","#F1C40F","#8E44AD","#2ECC71","#E74C3C","#3498DB","#1ABC9C","#34495E","#95A5A6","#16A085","#C0392B","#2980B9"],data:[]}]}),n={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},datalabels:{color:"#fff",font:{size:14},formatter:s=>`${s} commandes`}}};return b(async()=>{await a.getTotalOrderPerEmployees();const s=a.ordersTotalPerEmployees;if(!s||!Array.isArray(s)){console.error("Données invalides reçues :",s);return}o.value={...o.value,labels:s.map(t=>t.employeeDetails.firstName+" "+t.employeeDetails.lastName),datasets:[{...o.value.datasets[0],data:s.map(t=>t.totalOrders)}]}}),(s,t)=>(u(),p("div",null,[t[0]||(t[0]=r("h3",{class:"font-bold uppercase text-center"},"Nombre de commandes par Employés",-1)),r("div",Fe,[v(g(Y),{data:o.value,options:n},null,8,["data"])])]))}}),Ne={class:"flex items-center justify-evenly space-x-8"},ke={style:{width:"400px",height:"400px"}},Te={class:"space-y-8"},$e={class:"font-bold text-center"},Se={class:"font-bold uppercase text-center"};_.register(G,E,F);const Ie={components:{Doughnut:H}},Le=Object.assign(Ie,{__name:"productsComponent",setup(i){_.register(P);const a=C(),o=l({labels:[],datasets:[{label:null,backgroundColor:["#2ECC71","#E74C3C","#3498DB","#1ABC9C","#34495E","#95A5A6","#16A085","#C0392B","#2980B9"],data:[]}]}),n={responsive:!0,maintainAspectRatio:!1},s=w(()=>[...a.ordersTopProduct].sort((t,c)=>c.totalRevenue-t.totalRevenue));return b(async()=>{await a.getTopProductsInOrders();const t=a.ordersTopProduct;if(!t||!Array.isArray(t)){console.error("Données invalides reçues :",t);return}console.log(t.value),o.value={...o.value,labels:t.map(c=>c.productName),datasets:[{...o.value.datasets[0],data:t.map(c=>c.totalQuantity)}]}}),(t,c)=>(u(),p("div",Ne,[r("div",null,[c[0]||(c[0]=r("h3",{class:"font-bold uppercase text-center"},"Top 3 produits plus vendus",-1)),r("div",ke,[v(g(H),{data:o.value,options:n},null,8,["data"])])]),r("div",Te,[(u(!0),p(j,null,pe(s.value,(m,x)=>(u(),p("div",{key:m._id},[r("p",$e,[R(h(x+1)+". ",1),r("span",null,h(m.productName),1)]),r("p",null,[c[1]||(c[1]=R(" Revenu : ")),r("span",Se,h(m.totalRevenue)+" € ",1)])]))),128))])]))}}),Re={class:"w-full px-4 border-b mt-2"},je={class:"ml-4 mb-8"},ze={class:"flex items-center justify-evenly mx-auto flex-wrap space-y-8"},Ve={class:"flex"},Me=z({__name:"orderGraphicComponent",setup(i){return(a,o)=>(u(),p("div",Re,[r("div",je,[o[0]||(o[0]=r("h2",{class:"underline font-bold uppercase mb-8"},"Statistiques",-1)),r("div",ze,[r("div",Ve,[v(Be,{class:"m-8"}),v(be,{class:"m-8"})]),v(Ee,{class:"m-8"}),v(Le,{class:"m-8"})])])]))}}),Qe={class:"mx-auto size-full"},Ze={key:0,class:"text-center mt-8 flex items-center justify-center flex-col"},qe={key:1},He=z({__name:"ordersView",setup(i){const a=C();return b(()=>{a.getOrders()}),(o,n)=>(u(),p("div",Qe,[n[1]||(n[1]=r("h1",{class:"font-bold text-3xl border-b p-8"},"Liste des commandes",-1)),g(a).loading?(u(),p("div",Ze,n[0]||(n[0]=[r("span",{class:"loading loading-bars loading-xs size-32"},null,-1),r("span",null,"Chargement...",-1)]))):(u(),p("div",qe,[v(Me)]))]))}});export{He as default};
